<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./01.css">
</head>

<body>
    <div class="box">
        <div class="bg">
            <img src="./img/1.png">
        </div>
        <div class="imgs">
            <img src="./img/2.png">
            <img src="./img/3.png">
            <img src="./img/4.png">
            <img src="./img/5.png">
        </div>
        <div class="shine"></div>
    </div>

    <script>
        var bg = document.querySelector(".bg");
        var imgs = document.querySelectorAll(".imgs img");
        var shine = document.querySelector(".shine");

        var w = window.innerWidth;
        var h = window.innerHeight;

        window.onmousemove = (event) => {
            var x = event.pageX;
            var y = event.pageY;
            // console.log(w,h);
            // console.log(w/2 -x, h/2 -y);

            bg.style.transform = `rotateX(${(-2 / (h / 2)) * (w / 2 - y)}deg) rotateY(${(-2 / (w / 2)) * (h / 2 - x)}deg)`;
            shine.style.transform = `rotateX(${(-2 / (h / 2)) * (w / 2 - y)}deg) rotateY(${(-2 / (w / 2)) * (h / 2 - x)}deg)`;

            imgs.forEach((item) => {
                item.style.transform = `translateX(${(3 / (w / 2)) * (w / 2 - x)}px) translateY(${(3 / (h / 2)) * (h / 2 - y)}px)`;
            });

            var deg = (Math.atan((y - h / 2) / (x - w / 2)) * 180) / Math.PI;
            // console.log(deg);
            // 判断象限
            var cx = x - w / 2;
            var cy = y - h / 2;
            if (cx > 0) {
                // 第一二象限
                deg = deg + 90;
            } else {
                // 第三四象限
                deg = deg + 270;
            }
            // 每个象限都多加 90度 让0度上下
            shine.style.backgroundImage = `linear-gradient(${deg}deg, transparent, rgba(255, 255, 255, 0.3)`;
        }



    </script>
</body>

</html>